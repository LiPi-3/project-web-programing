<?php
    $data=[  
    ['1', '14.400', '60 Oneiric Shard | Rp14.400', 'oneiric', 'HSR'],
    ['2', '58.300', '300+30 Oneiric Shard | Rp58.300', 'oneiric', 'HSR'],
    ['3', '175.500', '980+110 Oneiric Shard | Rp175.500', 'oneiric', 'HSR'],
    ['4', '380.100', '1980+260 Oneiric Shard | Rp380.100', 'oneiric', 'HSR'],
    ['5', '585.600', '3280+600 Oneiric Shard | Rp585.600', 'oneiric', 'HSR'],
    ['6', '1.171.400', '6480+1600 Oneiric Shard | Rp1.171.400', 'oneiric', 'HSR'],
    ['7', '2.385.500', 'All Package Oneiric Shard | Rp2.385.500', 'oneiric', 'HSR'],
    ['8', '58.300', 'Express Supply Pass | Rp58.300', 'supply', 'HSR'],
    ['9', '116.600', 'Express Supply Pass x2 | Rp116.600', 'supply', 'HSR'],
    ['10', '174.900', 'Express Supply Pass x3 | Rp174.900', 'supply', 'HSR'],
    ['11', '233.200', 'Express Supply Pass x4| Rp233.200', 'supply', 'HSR'],
    ['12', '291.500', 'Express Supply Pass x5 | Rp291.500', 'supply', 'HSR'],
    ['13', '12.700', '100 Bonds | Rp12.700', '#', 'ABI'],
    ['14', '63.700', '500 Bonds | Rp63.700', '#', 'ABI'],
    ['15', '127.400', '1000 Bonds | Rp127.400', '#', 'ABI'],
    ['16', '318.400', '2500 Bonds | Rp318.400', '#', 'ABI'],
    ['17', '636.900', '5000 Bonds | Rp636.900', '#', 'ABI'],
    ['18', '1.274.100', '1000 Bonds | Rp1.274.100', '#', 'ABI'],
    ['19', '396.652', '2800 V-Bucks | Rp396.652', '#', 'FOT'],
    ['20', '543.038', '5000 V-Bucks | Rp543.038', '#', 'FOT'],
    ['21', '1.299.878', '13500 V-Bucks | Rp1.299.878', '#', 'FOT'],
    ['22', '11.500', '60 Genesis Crystal | Rp11.500', 'genesis', 'GI'],
    ['23', '58.500', '300+30 Genesis Crystal | Rp58.500', 'genesis', 'GI'],
    ['24', '175.900', '980+110 Genesis Crystal | Rp175.900', 'genesis', 'GI'],
    ['25', '381.500', '1980+260 Genesis Crystal | Rp381.500', 'genesis', 'GI'],
    ['26', '587.000', '3280+600 Genesis Crystal | Rp587.000', 'genesis', 'GI'],
    ['27', '1.174.200', '6480+1600 Genesis Crystal | Rp1.174.200', 'genesis', 'GI'],
    ['28', '2.388.200', 'All Package Genesis Crystal | Rp2.388.200', 'genesis', 'GI'],
    ['29', '57.900', 'Blessing of the Welkin Moon | Rp57.900', 'welkin', 'GI'],
    ['30', '116.900', 'Blessing of the Welkin Moon x2 | Rp116.900', 'welkin', 'GI'],
    ['31', '175.400', 'Blessing of the Welkin Moon x3 | Rp175.400', 'welkin', 'GI'],
    ['32', '233.800', 'Blessing of the Welkin Moon x4| Rp233.800', 'welkin', 'GI'],
    ['33', '292.300', 'Blessing of the Welkin Moon x5 | Rp292.300', 'welkin', 'GI'],
    ['34', '16.500', '65 Crystal | Rp16.500', 'crystal', 'HI'],
    ['35', '80.700', '330 Crystal | Rp80.700', 'crystal', 'HI'],
    ['36', '161.400', '710 Crystal | Rp161.400', 'crystal', 'HI'],
    ['37', '333.700', '1430 Crystal | Rp333.700', 'crystal', 'HI'],
    ['38', '811.800', '3860 Crystal | Rp811.800', 'crystal', 'HI'],
    ['39', '16.500', '65 B-Chips | Rp16.500', 'chip', 'HI'],
    ['40', '80.700', '330 B-Chips | Rp80.700', 'chip', 'HI'],
    ['41', '254.000', '990 B-Chips | Rp254.000', 'chip', 'HI'],
    ['42', '333.700', '1320 B-Chips | Rp333.700', 'chip', 'HI'],
    ['43', '487.100', '1980 B-Chips | Rp487.100', 'chip', 'HI'],
    ['44', '811.800', '3300 B-Chips | Rp811.800', 'chip', 'HI'],
    ['45', '80.700', 'Monthly Card | Rp80.700', 'member', 'HI'],
    ['46', '59.500', '575 RP | Rp59.500', '#', 'LOL'],
    ['47', '138.800', '1380 RP | Rp138.800', '#', 'LOL'],
    ['48', '277.500', '2800 RP | Rp277.500', '#', 'LOL'],
    ['49', '436.100', '4500 RP | Rp436.100', '#', 'LOL'],
    ['50', '614.400', '6500 RP | Rp614.400', '#', 'LOL'],
    ['51', '1.189.200', '13500 RP | Rp1.189.200', '#', 'LOL'],
    ['52', '1.500', '5 Diamonds (5+0 Bonus) | Rp1.500', 'diamond', 'ML'],
    ['53', '3.500', '12 Diamonds (11+1 Bonus) | Rp3.500', 'diamond', 'ML'],
    ['54', '5.500', '19 Diamonds (17+2 Bonus) | Rp5.500', 'diamond', 'ML'],
    ['55', '8.000', '28 Diamonds (25+3 Bonus) | Rp8.000', 'diamond', 'ML'],
    ['56', '11.900', '44 Diamonds (40+4 Bonus) | Rp11.900', 'diamond', 'ML'],
    ['57', '15.900', '59 Diamonds (53+6 Bonus) | Rp15.900', 'diamond', 'ML'],
    ['58', '22.800', '85 Diamonds (77+8 Bonus) | Rp22.800', 'diamond', 'ML'],
    ['59', '45.600', '170 Diamonds (154+16 Bonus) | Rp45.600', 'diamond', 'ML'],
    ['60', '64.600', '240 Diamonds (217+23 Bonus) | Rp64.600', 'diamond', 'ML'],
    ['61', '79.500', '296 Diamonds (256+40 Bonus) | Rp79.500', 'diamond', 'ML'],
    ['62', '108.800', '408 Diamonds (367+41 Bonus) | Rp108.800', 'diamond', 'ML'],
    ['63', '148.400', '568 Diamonds (503+65 Bonus) | Rp148.400', 'diamond', 'ML'],
    ['64', '227.500', '875 Diamonds (774+101 Bonus) | Rp227.500', 'diamond', 'ML'],
    ['65', '494.500', '2010 Diamonds (1708+302 Bonus) | Rp494.500', 'diamond', 'ML'],
    ['66', '1.186.500', '4830 Diamonds (4003+827 Bonus) | Rp1.186.500', 'diamond', 'ML'],
    ['67', '27.700', ' weekly Diamond Pass | Rp27.700', 'weekly', 'ML'],
    ['68', '59.300', ' weekly Diamond Pass 2x | Rp59.300', 'weekly', 'ML'],
    ['69', '84.200', ' weekly Diamond Pass 3x | Rp84.200', 'weekly', 'ML'],
    ['70', '112.300', ' weekly Diamond Pass 4x | Rp112.300', 'weekly', 'ML'],
    ['71', '140.300', ' weekly Diamond Pass 5x | Rp140.300', 'weekly', 'ML'],
    ['72', '149.000', ' Twilight Pass | Rp149.000', 'twilight', 'ML'],
    ['73', '9.450', '1200 PB CASH | Rp9.450', '#', 'PB'],
    ['74', '18.900', '2400 PB CASH | Rp18.900', '#', 'PB'],
    ['75', '47.250', '6000 PB CASH | Rp47.250', '#', 'PB'],
    ['76', '94.500', '12000 PB CASH | Rp94.500', '#', 'PB'],
    ['77', '189.000', '24000 PB CASH | Rp189.000', '#', 'PB'],
    ['78', '283.500', '36000 PB CASH | Rp283.500', '#', 'PB'],
    ['79', '472.500', '60000 PB CASH | Rp472.500', '#', 'PB'],
    ['80', '6.500', '30 UC | Rp6.500', 'UC', 'PUBG'],
    ['81', '12.900', '60 UC | Rp12.900', 'UC', 'PUBG'],
    ['82', '64.300', '300+25 UC | Rp64.300', 'UC', 'PUBG'],
    ['83', '128.500', '600+60 UC | Rp128.500', 'UC', 'PUBG'],
    ['84', '321.300', '1500+300 UC | Rp321.300', 'UC', 'PUBG'],
    ['85', '642.500', '3000+850 UC | Rp642.500', 'UC', 'PUBG'],
    ['86', '1.288.900', '6000+2100 UC | Rp1.288.900', 'UC', 'PUBG'],
    ['87', '144.000', 'Upgraded RP | Rp144.000', 'royale', 'PUBG'],
    ['88', '367.600', 'Upgraded Elite RP | Rp367.600', 'royale', 'PUBG'],
    ['89', '54.600', '475 Points | Rp54.600', '#', 'VAL'],
    ['90', '109.200', '1000 Points | Rp109.200', '#', 'VAL'],
    ['91', '163.800', '1475 Points | Rp163.800', '#', 'VAL'],
    ['92', '218.300', '2050 Points | Rp218.300', '#', 'VAL'],
    ['93', '272.900', '2525 Points | Rp272.900', '#', 'VAL'],
    ['94', '327.500', '3050 Points | Rp327.500', '#', 'VAL'],
    ['95', '379.100', '3650 Points | Rp379.100', '#', 'VAL'],
    ['96', '433.700', '4125 Points | Rp433.700', '#', 'VAL'],
    ['97', '488.300', '4650 Points | Rp488.300', '#', 'VAL'],
    ['98', '544.800', '5350 Points | Rp544.800', '#', 'VAL'],
    ['99', '597.400', '5700 Points | Rp597.400', '#', 'VAL'],
    ['100', '599.400', '5825 Points | Rp599.400', '#', 'VAL'],
    ['101', '653.900', '6350 Points | Rp653.900', '#', 'VAL'],
    ['102', '758.200', '7300 Points | Rp758.200', '#', 'VAL'],
    ['103', '763.100', '7400 Points | Rp763.100', '#', 'VAL'],
    ['104', '923.900', '9000 Points | Rp923.900', '#', 'VAL'],
    ['105', '1.071.000', '11000 Points | Rp1.071.000', '#', 'VAL'],
    ['106', '1.125.600', '11475 Points | Rp1.125.600', '#', 'VAL'],
    ['107', '1.180.100', '12000 Points | Rp1.180.100', '#', 'VAL'],
    ['108', '1.289.300', '13050 Points | Rp1.289.300', '#', 'VAL'],
    ['109', '1.450.100', '14650 Points | Rp1.450.100', '#', 'VAL'],
    ];
    if (isset($_POST)) {
        $judul=$_POST['judul'];
        $subj=$_POST['sub-judul'];
        $id=$_POST['user_id'];
        $server=(isset($_POST['server']))?$_POST['server']:null;
        $item=$_POST['options'];
        $bayar=$_POST["payment"];
    }
    $date= date("d/m/Y, H:i:s", time());
    $unique= '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konfirmasi Pembayaran</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .timer-box {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        background-color: #ffffff;
        padding: 1em 2em;
        border-radius: 1em;
      }

      .timer-number {
        font-size: 3em;
        font-weight: bold;
        color: #0d6efd;
        background-color: #e7f1ff;
        border-radius: 8px;
        padding: 10px 20px;
        text-align: center;
      }

      .timer-label {
        font-size: 1rem;
        color: #6c757d;
      }
    </style>
</head>
<body>
<header>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container-fluid">
    <a class="navbar-brand" href="home.php">Lawak Store</a>
    </div>
</nav>
</header>
    <div class="container my-5">
        <div class="row">
            <!-- Countdown Timer Section -->
            <div class="col-md-4">
                <div class="card shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title fw-bold mb-4">Menunggu Pembayaran</h5>
                        <p class="mt-3 small text-muted">Selesaikan pembayaran sebelum waktu habis</p>

                            <div class="timer-box">
                                <div>
                                  <div id="hours" class="timer-number">01</div>
                                  <div class="timer-label text-center">Jam</div>
                                </div>
                                <span></span>
                                <div>
                                  <div id="minutes" class="timer-number">00</div>
                                  <div class="timer-label text-center">Menit</div>
                                </div>
                                <span></span>
                                <div>
                                  <div id="seconds" class="timer-number">00</div>
                                  <div class="timer-label text-center">Detik</div>
                                </div>
                            </div>

                        <p class="mt-3 small text-muted">Agar Pesanan Kamu Tidak Expired</p>
                        <button  type="button" class="btn btn-primary w-100 mt-4" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@Pembayaran">Lanjutkan Pembayaran</button>

                        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Selesaikan Pembayaran</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <table class="table table-borderless">
                                    <tr>
                                        <th>Judul</th>
                                        <td><?= $judul ?></td>
                                    </tr>
                                    <tr>
                                        <th>Metode Pembayaran</th>
                                        <td><?= $bayar ?></td>
                                    </tr>
                                    <tr>
                                        <th>Tanggal Pembelian</th>
                                        <td><?= $date ?></div></td>
                                    </tr>
                                    <tr>
                                        <th>Kode Pesanan</th>
                                        <td><?= $data[$item-1][4] ?>-<?= substr(str_shuffle($unique),0 ,15) ?></td>
                                    </tr>
                                    <tr>
                                        <th>Item</th>
                                        <td><?= $data[$item-1][2] ?></td>
                                    </tr>
                                    <tr>
                                        <th>User Id</th>
                                        <td><?= $id ?></td>
                                    </tr>
                                    <?php 
                                    if ($server!=null) { 
                                    echo"<tr>
                                        <th>Server</th>
                                        <td>$server</td>
                                        </tr>";
                                    } ?>
                                    <tr>
                                        <th>Jumlah Transfer</th>
                                        <td>Rp.<?=$data[$item-1][1] ?></td>
                                    </tr>
                                    <tr>
                                        <th>No.Rekening</th>
                                        <td>00XXXXXXXX</td>
                                    </tr>
                                    </table>
                                </div>
                                <div class="modal-footer">
                                    <a href="selesai.php" role="button" class="btn btn-success">Konfirmasi</a>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detail Pesanan Section -->
            <div class="col-md-8">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div>
                                <h5 class="card-title"><?= $judul ?></h5>
                                <p class="small text-muted"><?= $subj ?></p>
                            </div>
                            <div>
                                <span class="badge bg-success">Metode Pembayaran: <?= $bayar ?></span>
                            </div>
                        </div>
                        <table class="table table-borderless">
                            <tr>
                                <th>Tanggal Pembelian</th>
                                <td><?= $date ?></div></td>
                            </tr>
                            <tr>
                                <th>Item</th>
                                <td><?= $data[$item-1][2] ?></td>
                            </tr>
                            <tr>
                                <th>User Id</th>
                                <td><?= $id ?></td>
                            </tr>
                            <?php 
                            if ($server!=null) { 
                            echo"<tr>
                                <th>Server</th>
                                <td>$server</td>
                                </tr>";
                            } ?>
                        </table>
                        <div class="important-note text-center my-3">
                            Total Pembayaran: <strong>Rp <?=$data[$item-1][1] ?>,-</strong>
                            <p class="small mt-2">PENTING! Pastikan nominal transfer <u>TEPAT BERJUMLAH ANGKA DI ATAS</u> (hingga 3 angka terakhir).</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panduan Pembayaran -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="accordion" id="paymentGuide">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Panduan Cara Pembayaran <?= $bayar ?>
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#paymentGuide">
                            <div class="accordion-body">
                                <ol>
                                    <li>Buka aplikasi <?= $bayar ?> di ponsel kamu.</li>
                                    <li>Pilih menu <strong>Transfer</strong>.</li>
                                    <li>Masukkan nominal <u>tepat sesuai jumlah</u> di atas.</li>
                                    <li>Konfirmasi pembayaran dan simpan bukti transfer.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let countdownTime = 60 * 60;
        let timerInterval;

        function startTimer() {
            timerInterval = setInterval(function () {
                let hours = Math.floor(countdownTime / 3600);
                let minutes = Math.floor((countdownTime % 3600) / 60);
                let seconds = countdownTime % 60;

                 // Menampilkan nilai ke elemen HTML
                 document.getElementById("hours").innerText = hours
                 .toString()
                 .padStart(2, "0");
                 document.getElementById("minutes").innerText = minutes
                 .toString()
                 .padStart(2, "0");
                 document.getElementById("seconds").innerText = seconds
                 .toString()
                 .padStart(2, "0");

                 countdownTime--;

                 if (countdownTime < 0) {
                    clearInterval(timerInterval);
                    alert("Waktu Habis!");
                 }
            }, 1000);
        }
        startTimer();
    </script>
</body>
</html>
